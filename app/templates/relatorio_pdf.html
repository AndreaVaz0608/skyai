{% extends "base.html" %}
{% block title %}Informe astral â€¢ SkyAI{% endblock %}
{% block body_class %}report-page{% endblock %}

{% block content %}

<!-- ======= CONTÃŠINER PRINCIPAL ======= -->
<div style="max-width: 860px; margin:2rem auto; padding:0 1rem;">

  <!-- ---------- CabeÃ§alho ---------- -->
  <div style="text-align:center; margin-bottom:2rem;">
      <img src="{{ url_for('static', filename='img/logo_skyai.png') }}"
           alt="Logo de SkyAI" style="max-height:70px">
      <h1 style="margin-top:.8rem; font-size:2rem; color:#FFD86A;">
          ğŸŒŒ Tu Informe Astral Personalizado
      </h1>
  </div>

  <!-- ---------- bloco de erro ---------- -->
  {% if resultado.erro %}
    <div style="background:#401010; padding:1rem 1.4rem; border-radius:8px;
                color:#FF9E9E; margin-bottom:1.8rem;">
        ğŸš§ No pudimos completar tu lectura astral.<br>
        <small><strong>Error:</strong> {{ resultado.erro }}</small>
    </div>
  {% endif %}

  <!-- ---------- PROFILE SUMMARY ---------- -->
  <section style="background:#111C2C; border-radius:10px; padding:1.4rem 1.6rem; margin-bottom:1.8rem;">
     <h2 style="color:#FFD86A; font-size:1.35rem; margin-top:0;">ğŸ—‚ï¸ Resumen del perfil</h2>
     <ul style="list-style:none; padding:0; margin-top:.8rem; font-size:1rem; line-height:1.55rem; color:#EAEAEA;">
        <li><span style="color:#FFD86A;">ğŸŒŸ Nombre completo:</span> {{ resultado.nome|default('â€”') }}</li>
        <li><span style="color:#FFD86A;">ğŸ—…ï¸ Fecha de nacimiento:</span> {{ resultado.birth_date|default('â€”') }}</li>
        <li><span style="color:#FFD86A;">ğŸ•°ï¸ Hora de nacimiento:</span> {{ resultado.birth_time|default('â€”') }}</li>
        <li><span style="color:#FFD86A;">ğŸŒ Ciudad:</span> {{ resultado.birth_city|default('â€”') }}</li>
        <li><span style="color:#FFD86A;">ğŸŒ PaÃ­s:</span> {{ resultado.birth_country|default('â€”') }}</li>
     </ul>
  </section>

  <!-- ---------- COSMIC INSIGHTS ---------- -->
  <section style="background:#111C2C; border-radius:10px; padding:1.4rem 1.6rem; margin-bottom:1.8rem;">
     <h2 style="color:#FFD86A; font-size:1.35rem; margin-top:0;">ğŸ”­ Perspectivas cÃ³smicas</h2>

     {% set texto_bruto = resultado.texto|default('') %}
     {% if texto_bruto %}
        {% for bloco in texto_bruto.split('## ') if bloco.strip() %}
           {% set bloco_limpo = bloco|trim %}
           <div style="margin:.9rem 0;">
               {% set partes = bloco_limpo.split(':', 1) %}
               {% if partes|length > 1 and partes[0]|length < 70 %}
                   <h3 style="color:#FFD86A; font-size:1.1rem; margin-bottom:.3rem;">
                       {{ partes[0]|replace('###','')|trim }}
                   </h3>
                   <p style="margin:0; color:#EAEAEA;">{{ partes[1]|trim }}</p>
               {% else %}
                   <p style="margin:0; color:#EAEAEA;">{{ bloco_limpo|replace('###','') }}</p>
               {% endif %}
           </div>
        {% endfor %}
     {% else %}
        <p style="color:#EAEAEA;">â€” Perspectivas no disponibles â€”</p>
     {% endif %}
  </section>

  <!-- ---------- SIGNATURES / NUMBERS ---------- -->
  <section style="background:#111C2C; border-radius:10px; padding:1.4rem 1.6rem;">
     <h2 style="color:#FFD86A; font-size:1.35rem; margin-top:0;">ğŸ”‘ Firmas celestiales</h2>
     <ul style="list-style:none; padding:0; margin-top:.8rem; font-size:1rem; line-height:1.55rem; color:#EAEAEA;">
        <li><span style="color:#FFD86A;">â˜€ Signo solar:</span> {{ resultado.sun_sign|default('â€”') }}</li>
        <li><span style="color:#FFD86A;">ğŸŒ™ Signo lunar:</span> {{ resultado.moon_sign|default('â€”') }}</li>
        <li><span style="color:#FFD86A;">â¬† Ascendente:</span> {{ resultado.ascendant|default('â€”') }}</li>
        <li><span style="color:#FFD86A;">ğŸ”¢ NÃºmero de Camino de Vida:</span> {{ resultado.life_path|default('â€”') }}</li>
        <li><span style="color:#FFD86A;">ğŸ’“ NÃºmero de Anhelo del Alma:</span> {{ resultado.soul_urge|default('â€”') }}</li>
        <li><span style="color:#FFD86A;">âœ¨ NÃºmero de ExpresiÃ³n:</span> {{ resultado.expression|default('â€”') }}</li>
     </ul>
  </section>

  <p style="text-align:center; color:#6A768C; font-size:.85rem; margin-top:2rem;">
      Generado por SkyAI â€¢ Â© {{ current_year|default(2025) }}
  </p>

</div>
{% endblock %}
