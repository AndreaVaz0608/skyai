{# templates/carregando.html – versão com auto-refresh #}
{% extends "base.html" %}
{% block title %}Processing… • SkyAI{% endblock %}

{# ── Cabeçalho extra: meta-refresh a cada 10 s para /relatorio ── #}
{% block head %}
  {{ super() }}
  <meta http-equiv="refresh"
        content="10;url={{ url_for('user.gerar_relatorio', sessao_id=sessao_id) }}">
{% endblock %}

{% block content %}
<style>
  .video-container{
      width:100%;
      min-height:100vh;
      background:#000;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      overflow:hidden
  }
  video{
      max-width:100%;
      max-height:100%;
      object-fit:contain
  }
  .message,.paid-message{
      width:100%;
      text-align:center;
      font-family:'Poppins',sans-serif;
      color:#fff;
      font-weight:500;
      padding:1rem 2rem
  }
  .paid-message{
      color:#4CAF50;
      margin-bottom:.5rem
  }
  @media(max-width:600px){
      .message,.paid-message{font-size:1rem}
  }
</style>

<div class="video-container">
  {% if pago %}
    <div class="paid-message">
      ✅ Payment confirmed! Your report is being generated.
    </div>
  {% endif %}

  <div class="message">
    Aligning stars, decoding numbers… Your cosmic map is almost ready!
  </div>

  <video autoplay muted loop playsinline>
    <source src="{{ url_for('static', filename='videos/skyai_loading.mp4') }}" type="video/mp4">
    Your browser does not support the video tag.
  </video>
</div>
{% endblock %}
